(this.webpackJsonptsc=this.webpackJsonptsc||[]).push([[0],{104:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var a,c=n(2),r=n(0),i=n(12),o=n.n(i),s=n(9),l=n(19),u=n(6),d=["Erstellen","Teilnehmer","Wettbewerb"],j="event-list",b="event-manager",f="competitor-list",p="competitor-manager",O="work-space",v=(a={},Object(u.a)(a,j,"Erstellen"),Object(u.a)(a,b,"Erstellen"),Object(u.a)(a,f,"Teilnehmer"),Object(u.a)(a,p,"Teilnehmer"),Object(u.a)(a,O,"Wettbewerb"),a);function m(e){return v[e]}var h=Object(l.c)({name:"navigation",initialState:{activeContent:j,activeStep:m(j)},reducers:{setActiveContent:function(e,t){e.activeContent=t.payload,e.activeStep=m(t.payload)},setActiveStep:function(e,t){e.activeContent=function(e){for(var t=Object.keys(v),n=0;n<t.length;n++){var a=t[n];if(v[a]===e)return a}}(t.payload),e.activeStep=t.payload}}}),g=h.actions,x=g.setActiveContent,y=g.setActiveStep,k=h.reducer,w=n(20),C=n.n(w),N=n(34),S=n(16),I=n(71),T=n(72),A="dense",_="certificates",E="protocol";var P,L,R=new(function(){function e(){Object(I.a)(this,e),this.baseUrl="",this.oAuth2_access_token="",this.tokenExpiryDate=null,this.baseUrl="https://wolke.glencoden.de"}return Object(T.a)(e,[{key:"get",value:function(e){var t={"Content-Type":"application/json; charset=utf-8"};return this.oAuth2_access_token&&(t.Authorization="Bearer ".concat(this.oAuth2_access_token)),Promise.resolve().then((function(){return fetch(e,{method:"GET",headers:t})})).then((function(e){return e.json()})).catch((function(e){return console.error("Request Service: ",e)}))}},{key:"post",value:function(e,t){var n={"Content-Type":"application/json; charset=utf-8"};return this.oAuth2_access_token&&(n.Authorization="Bearer ".concat(this.oAuth2_access_token)),Promise.resolve().then((function(){return JSON.stringify(t)})).then((function(t){return fetch(e,{method:"POST",headers:n,body:t})})).then((function(e){return e.json()})).catch((function(e){return console.error("Request Service: ",e)}))}},{key:"postEncodeURI",value:function(e,t){return Promise.resolve().then((function(){return function(e){var t=[];for(var n in e){var a=encodeURIComponent(n),c=encodeURIComponent(e[n]);t.push("".concat(a,"=").concat(c))}return t.join("&")}(t)})).then((function(t){return fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:t})})).then((function(e){return e.ok?e.json():Promise.reject(e)}))}},{key:"login",value:function(e,t){var n=this;return this.postEncodeURI("".concat(this.baseUrl,"/auth/login"),{username:e,password:t,grant_type:"password",client_id:null,client_secret:null}).then((function(e){n.oAuth2_access_token=e.access_token;var t=new Date;return t.setSeconds(t.getSeconds()+e.expires_in-60),n.tokenExpiryDate=t,{success:!0}}))}},{key:"isAuthTokenValid",value:function(){return new Date<this.tokenExpiryDate}},{key:"fetchPrint",value:function(e,t){var n,a={};switch(e){case _:a.competitors=t,n="".concat(this.baseUrl,"/tsc/print_certificates");break;case E:a.competitors=t,n="".concat(this.baseUrl,"/tsc/print_protocol")}var c={"Content-Type":"application/json; charset=utf-8"};this.oAuth2_access_token&&(c.Authorization="Bearer ".concat(this.oAuth2_access_token)),Promise.resolve().then((function(){return JSON.stringify(a)})).then((function(e){return fetch(n,{method:"POST",headers:c,body:e})})).then((function(e){return e.blob()})).then((function(e){var t=URL.createObjectURL(new Blob([e],{type:"application/pdf"})),n=document.createElement("a");n.href=t,n.target="_blank",n.click(),setTimeout((function(){return URL.revokeObjectURL(t)}),100)})).catch((function(e){return console.error(e)}))}}]),e}()),U={FEMALE:"W",MALE:"M"},M=[9,10,11,12,13,14],D={A:"Kinder",B:"Sch\xfcler"},F=(P={},Object(u.a)(P,D.A,[9,10,11,12]),Object(u.a)(P,D.B,[13,14]),P),W={PUSH:"Bankdr\xfccken",PULL:"Zug liegend",SNATCH:"Rei\xdfen",CLEAN_AND_JERK:"Sto\xdfen",PULL_UP:"Klimmziehen",T2B:"Anristen",SCHO:"SCHO",H1:"H1",LT:"LT",DR_M:"30m",SW:"SW",SD:"SD",PL:"PL",GYM:"Turnen"},G={GYMNASTICS:W.GYM};function B(){var e;return{id:0,name:"",date:(new Date).toISOString().split("T")[0],place:"",host:"",start:"16:30",final:!1,disciplines:Object.values(W).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(u.a)({},t,!1))}),{}),gymnastics:(e={},Object(u.a)(e,D.A,""),Object(u.a)(e,D.B,""),e),competitorIds:[]}}var Y,H=Object(l.b)("events/getEvents",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("".concat(R.baseUrl,"/tsc/get_events"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(l.b)("events/deleteEvent",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("".concat(R.baseUrl,"/tsc/delete_event/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),V=Object(l.b)("events/saveEvent",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("".concat(R.baseUrl,"/tsc/upsert_event"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Object(l.c)({name:"events",initialState:{all:{},activeId:0,draft:B()},reducers:{resetEvents:function(e){e.activeId=0,e.draft=B()},setEventId:function(e,t){e.activeId=t.payload},addCompetitorId:function(e,t){e.activeId&&e.all[e.activeId].competitorIds.push(t.payload)},removeCompetitorId:function(e,t){if(e.activeId){var n=e.all[e.activeId];n.competitorIds.splice(n.competitorIds.indexOf(t.payload),1)}},editEvent:function(e,t){e.draft=e.all[t.payload]},setName:function(e,t){e.draft.name=t.payload},setDate:function(e,t){e.draft.date=t.payload},setPlace:function(e,t){e.draft.place=t.payload},setHost:function(e,t){e.draft.host=t.payload},setStart:function(e,t){e.draft.start=t.payload},toggleFinal:function(e){e.draft.final=!e.draft.final},toggleDiscipline:function(e,t){e.draft.disciplines[t.payload]=!e.draft.disciplines[t.payload]},setGymnastics:function(e,t){t.payload.group&&(e.draft.gymnastics[t.payload.group]=t.payload.gymnastics)}},extraReducers:(L={},Object(u.a)(L,H.fulfilled,(function(e,t){Array.isArray(t.payload)?e.all=t.payload.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(u.a)({},t.id,t))}),{}):console.warn("error getting events")})),Object(u.a)(L,J.fulfilled,(function(e,t){var n;(null===(n=t.payload)||void 0===n?void 0:n.success)?(e.activeId===Number(t.payload.id)&&(e.activeId=0),delete e.all[t.payload.id]):console.warn("error deleting event")})),Object(u.a)(L,V.fulfilled,(function(e,t){var n;(null===(n=t.payload)||void 0===n?void 0:n.success)?(e.all[t.payload.event.id]=t.payload.event,e.activeId=t.payload.event.id,e.draft=B()):console.warn("error saving event")})),L)}),K=z.actions,q=K.resetEvents,$=K.setEventId,Z=K.addCompetitorId,Q=K.removeCompetitorId,X=K.editEvent,ee=K.setName,te=K.setDate,ne=K.setPlace,ae=K.setHost,ce=K.setStart,re=K.toggleFinal,ie=K.toggleDiscipline,oe=K.setGymnastics,se=z.reducer,le=n(33);function ue(e,t,n,a){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return function(r){return Math.max(Math.round(((n-a)*(r-e)/(e-t)+n)/c),0)*c}}var de,je=(Y={},Object(u.a)(Y,W.PUSH,ue(0,15,0,30)),Object(u.a)(Y,W.PULL,ue(0,15,0,30)),Object(u.a)(Y,W.PULL_UP,ue(0,15,0,30)),Object(u.a)(Y,W.T2B,ue(0,15,0,30)),Object(u.a)(Y,W.H1,ue(10,15.7,45,16)),Object(u.a)(Y,W.LT,ue(11,16,50,0)),Object(u.a)(Y,W.DR_M,ue(4.3,6.3,40,0)),Object(u.a)(Y,W.SW,ue(1.35,2.85,0,50)),Object(u.a)(Y,W.SD,ue(4,9,0,50)),Object(u.a)(Y,W.SCHO,ue(3,13,0,50)),Object(u.a)(Y,W.PL,ue(9,14,50,0)),Object(u.a)(Y,W.GYM,ue(0,10,0,30,.5)),Object(u.a)(Y,W.SNATCH,ue(0,10,0,30,.5)),Object(u.a)(Y,W.CLEAN_AND_JERK,ue(0,10,0,30,.5)),Y),be=Object(u.a)({},G.GYMNASTICS,(function(e){return Object.values(e).reduce((function(e,t){return e+t}),0)}));function fe(e,t){var n=je[e];return"function"!==typeof n?0:(Object.values(G).includes(e)&&(t=be[e](t)),n(t))}function pe(e){return(new Date).getFullYear()-Number(e)}function Oe(e){return(new Date).getFullYear()-e}function ve(e,t){var n=[];return Object.values(D).forEach((function(t){var a=e.filter((function(e){return F[t].includes(pe(e.year))}));Object.values(U).forEach((function(e){n.push(a.filter((function(t){return e===t.gender})))}))})),n.reduce((function(e,n){return[].concat(Object(le.a)(e),Object(le.a)(function(e,t){var n=Array.isArray(t)?t:[t],a=-1,c=1,r=e.reduce((function(e,t){var a=n.reduce((function(n,a){var c=t.results[a];return c?(Object.keys(c).forEach((function(t){"number"===typeof e[t]?e[t]=e[t]+c[t]:e[t]=c[t]})),e):e}),{});return[].concat(Object(le.a)(e),[{id:t.id,points:Object.keys(a).reduce((function(e,t){return a[t]?e+fe(t,a[t]):e}),0)}])}),[]).sort((function(e,t){return t.points-e.points})).map((function(e){return a>e.points&&(c++,a=e.points),-1===a&&(a=e.points),Object(S.a)(Object(S.a)({},e),{},{rank:c})}));return e.map((function(e){var t=r.find((function(t){return t.id===e.id})),n=t.points,a=t.rank;return Object(S.a)(Object(S.a)({},e),{},{points:n,rank:a})}))}(n,t)))}),[])}function me(){return{id:0,name:"",gender:U.FEMALE,year:(new Date).toISOString().split("T")[0].split("-")[0]-9,weight:{},club:"",results:{}}}var he=Object(l.b)("competitors/getCompetitors",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("".concat(R.baseUrl,"/tsc/get_competitors"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ge=Object(l.b)("competitors/deleteCompetitor",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("".concat(R.baseUrl,"/tsc/delete_competitor/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xe=Object(l.b)("competitors/saveCompetitor",function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.post("".concat(R.baseUrl,"/tsc/upsert_competitor"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ye=Object(l.c)({name:"competitors",initialState:{all:{},rankedList:[],draft:me()},reducers:{resetCompetitors:function(e){e.draft=me()},editCompetitor:function(e,t){e.draft=e.all[t.payload]},setName:function(e,t){e.draft.name=t.payload},setGender:function(e,t){e.draft.gender=t.payload},setYear:function(e,t){e.draft.year=t.payload},setWeight:function(e,t){t.payload.eventId?t.payload.competitorId?e.all[t.payload.competitorId].weight[t.payload.eventId]=t.payload.weight:console.warn("you tried to set a weight without a competitor id"):console.warn("you tried to set a weight without an event id")},setClub:function(e,t){e.draft.club=t.payload},setResult:function(e,t){t.payload.eventId?t.payload.competitorId?(e.all[t.payload.competitorId].results[t.payload.eventId]||(e.all[t.payload.competitorId].results[t.payload.eventId]={}),e.all[t.payload.competitorId].results[t.payload.eventId][t.payload.discipline]=t.payload.result):console.warn("you tried to set a result without a competitor id"):console.warn("you tried to set a result without an event id")},setRanked:function(e,t){var n=t.payload,a=n.competitors,c=n.eventIds;e.rankedList=ve(a,c).sort((function(e,t){return e.name.charCodeAt(0)-t.name.charCodeAt(0)}))}},extraReducers:(de={},Object(u.a)(de,he.fulfilled,(function(e,t){Array.isArray(t.payload)?e.all=t.payload.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(u.a)({},t.id,t))}),e.all):console.warn("error getting competitors")})),Object(u.a)(de,ge.fulfilled,(function(e,t){var n;(null===(n=t.payload)||void 0===n?void 0:n.success)?delete e.all[t.payload.id]:console.warn("error deleting competitor")})),Object(u.a)(de,xe.fulfilled,(function(e,t){var n;(null===(n=t.payload)||void 0===n?void 0:n.success)?(e.all[t.payload.competitor.id]=t.payload.competitor,e.draft=me()):console.warn("error saving competitor")})),de)}),ke=ye.actions,we=ke.resetCompetitors,Ce=ke.editCompetitor,Ne=ke.setName,Se=ke.setGender,Ie=ke.setYear,Te=ke.setWeight,Ae=ke.setClub,_e=ke.setResult,Ee=ke.setRanked,Pe={navigation:k,events:se,competitors:ye.reducer},Le=(n(104),n(14)),Re={ARRAY:[],OBJECT:{},FUNCTION:function(){}};function Ue(e){return null!==e&&"function"!==typeof e&&"object"===typeof e&&!Array.isArray(e)}var Me=function(e){return e.events.activeId?e.events.all[e.events.activeId]:Re.OBJECT},De=function(e){var t=Me(e).competitorIds||[];return Object.keys(e.competitors.all).reduce((function(n,a){return t.includes(Number(a))?[].concat(Object(le.a)(n),[e.competitors.all[a]]):n}),[])},Fe=function(e){var t,n=null===(t=Me(e).date)||void 0===t?void 0:t.split("-")[0];return n?Object.values(e.events.all).filter((function(e){var t;return(null===(t=e.date)||void 0===t?void 0:t.split("-")[0])===n})).map((function(e){return e.id})):Re.ARRAY},We=n(170),Ge=n(148),Be=n(171),Ye=n(153),He=n(108);var Je=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object(r.useState)(!0),c=Object(Le.a)(a,2),i=c[0],o=c[1],s=Object(r.useRef)(0);return Object(r.useEffect)((function(){if(i){var a=function n(){t(),s.current=setTimeout((function(){return n()}),1e3*e)};return n?a():s.current=setTimeout((function(){return a()}),1e3*e),function(){return clearTimeout(s.current)}}}),[i,e,t,n]),[i,o]};var Ve=function(){var e=Object(r.useState)(!0),t=Object(Le.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(""),o=Object(Le.a)(i,2),s=o[0],l=o[1],u=Object(r.useState)(""),d=Object(Le.a)(u,2),j=d[0],b=d[1],f=Object(r.useCallback)((function(){R.isAuthTokenValid()||a(!0)}),[]);Je(30,f);var p=function(){l(""),b("")};return Object(c.jsxs)(We.a,{open:n,onClose:function(){},"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(Ge.a,{children:Object(c.jsx)(Be.a,{autoFocus:!0,margin:"normal",id:"pw",label:Object(c.jsx)("span",{className:"material-icons",children:"vpn_key"}),type:"password",fullWidth:!0,value:s,onChange:function(e){var t=e.target;return l(t.value)},onFocus:p,error:!!j,helperText:j})}),Object(c.jsx)(Ye.a,{children:Object(c.jsx)(He.a,{variant:"contained",color:"primary",onClick:function(){R.login("michi_mueller",s).then((function(e){e.success?(a(!1),p()):b("Unbekannter Fehler")})).catch((function(){b("Falsches Passwort")}))},children:"Login"})})]})},ze=n(5),Ke=n(154),qe=n(109),$e=n(155),Ze=n(156),Qe=n(167),Xe=n(60),et=n.n(Xe);var tt={};function nt(){var e=Math.min(640,Math.round(.95*window.innerWidth));tt={width:"".concat(e,"px"),margin:"0 ".concat((window.innerWidth-e)/2,"px")}}function at(){return tt}nt(),window.addEventListener("resize",nt);var ct=Object(ze.a)({alternativeLabel:{top:22},active:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},completed:{"& $line":{backgroundImage:"linear-gradient( 95deg,rgb(242,113,33) 0%,rgb(233,64,87) 50%,rgb(138,35,135) 100%)"}},line:{height:3,border:0,backgroundColor:"#eaeaf0",borderRadius:1}})(qe.a),rt=Object(Ke.a)({root:{backgroundColor:"#ccc",zIndex:1,color:"#fff",width:50,height:50,display:"flex",borderRadius:"50%",justifyContent:"center",alignItems:"center",cursor:"pointer"},active:{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)",boxShadow:"0 4px 10px 0 rgba(0,0,0,.25)"},completed:{backgroundImage:"linear-gradient( 136deg, rgb(242,113,33) 0%, rgb(233,64,87) 50%, rgb(138,35,135) 100%)"}});function it(e){var t=rt(),n=e.active,a=e.completed,r={1:Object(c.jsx)("span",{className:"material-icons",children:"event_note"}),2:Object(c.jsx)("span",{className:"material-icons",children:"people_alt"}),3:Object(c.jsx)("span",{className:"material-icons",children:"emoji_events"})};return Object(c.jsx)("div",{className:"".concat(t.root).concat(n?" ".concat(t.active):"").concat(a?" ".concat(t.completed):""),children:r[String(e.icon)]})}var ot=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.navigation.activeStep}));return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:et.a.TopNavigation,children:Object(c.jsx)($e.a,{className:et.a.TopNavigationStepper,style:at(),alternativeLabel:!0,activeStep:d.indexOf(t),connector:Object(c.jsx)(ct,{}),children:d.map((function(t){return Object(c.jsx)(Ze.a,{onClick:function(){return e(y(t))},children:Object(c.jsx)(Qe.a,{StepIconComponent:it})},t)}))})}),Object(c.jsx)("div",{className:et.a.TopNavigationSpacer})]})},st=n(65),lt=n.n(st),ut=n(157),dt=n(174),jt=n(175),bt=n(168),ft=[{icon:Object(c.jsx)("span",{className:"material-icons",children:"event_note"}),name:"Protokoll",type:E},{icon:Object(c.jsx)("span",{className:"material-icons",children:"people_alt"}),name:"Urkunden",type:_}];var pt=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.navigation.activeContent})),n=Object(s.c)((function(e){return e.competitors.rankedList})),a=Object(r.useState)(!1),i=Object(Le.a)(a,2),o=i[0],l=i[1],u=null,d="",v="";switch(t){case j:u=function(){return e(x(b))},d="add",v="primary";break;case b:u=function(){return e(x(j))},d="clear",v="secondary";break;case f:u=function(){return e(x(p))},d="add",v="primary";break;case p:u=function(){e(xe()),e(x(f))},d="clear",v="secondary";break;default:d="add",v="primary"}return Object(c.jsx)("footer",{className:lt.a.BottomNavigation,style:at(),children:Object(c.jsxs)("div",{className:lt.a.Cta,children:[t!==O&&Object(c.jsx)(ut.a,{color:v,"aria-label":"add",onClick:u,children:Object(c.jsx)("span",{className:"material-icons",children:d})}),t===O&&window.innerWidth>576&&Object(c.jsx)(dt.a,{ariaLabel:"SpeedDial example",hidden:!1,icon:Object(c.jsx)(jt.a,{}),onClose:function(){return l(!1)},onOpen:function(){return l(!0)},open:o,direction:"up",children:ft.map((function(e){return Object(c.jsx)(bt.a,{icon:e.icon,tooltipTitle:e.name,onClick:function(){R.fetchPrint(e.type,n),l(!1)}},e.name)}))})]})})},Ot=n(158),vt=n(159),mt=n(110),ht=n(160),gt=n(111),xt=Object(Ke.a)((function(e){return{card:{margin:"10px 0"},cardActive:{backgroundColor:e.palette.secondary.light},cardContent:{display:"grid",gridTemplateColumns:"auto 160px"},cardActions:{justifySelf:"end",alignSelf:"start"},contrastText:{color:e.palette.grey[100]},gymnasticsTag:{color:e.palette.primary.main}}})),yt=Object(Ke.a)((function(e){return{card:{margin:"10px 0"},flexRow:{display:"flex"},gridRow:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"10px"},spacer:{width:"10px",flexShrink:0},marginTop:{marginTop:"15px"}}})),kt=Object(Ke.a)((function(e){return{card:{margin:"10px 0"},row:{display:"flex",justifyContent:"space-between"},editor:{display:"grid",gridTemplateColumns:"1fr 1fr",gridGap:"10px"},editorEntry:{display:"flex",flexWrap:"wrap",alignItems:"center"},editorIcon:{color:e.palette.grey[300]},editorPoints:{marginLeft:"10px"},gymnasticsResult:{alignSelf:"center",display:"flex",alignItems:"center"},marginTop:{marginTop:"15px"}}})),wt=Object(Ke.a)((function(e){return{filter:{display:"flex",justifyContent:"center",marginTop:"10px"},filterGroup:{marginRight:"10px"}}}));var Ct=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.events.all})),n=Object(s.c)((function(e){return e.events.activeId})),a=xt(),i=Object(r.useState)([]),o=Object(Le.a)(i,2),l=o[0],u=o[1],d=Object(r.useState)(-1),j=Object(Le.a)(d,2),f=j[0],p=j[1],O=Object(r.useCallback)((function(){return e(H())}),[e]),v=!Ue(t)||0===Object.keys(t).length;Je(15,O,v),Object(r.useEffect)((function(){Ue(t)&&u(Object.values(t).sort((function(e,t){return new Date(e.date)-new Date(t.date)})))}),[t]);var m=function(t,n){t.stopPropagation(),e(X(n)),e(x(b))};return l.length?Object(c.jsx)("div",{children:l.map((function(t,r){var i=t.id===n;return Object(c.jsx)(Ot.a,{className:"".concat(a.card," ").concat(i&&a.cardActive),elevation:3,onClick:function(){return e($(t.id))},onDoubleClick:function(e){return m(e,t.id)},children:Object(c.jsxs)(vt.a,{children:[Object(c.jsxs)("div",{className:a.cardContent,children:[Object(c.jsxs)("div",{children:[t.final&&Object(c.jsx)(mt.a,{variant:"overline",color:"primary",display:"block",children:"Jahresabschluss ".concat(t.date.split("-")[0])}),Object(c.jsxs)(mt.a,{variant:"overline",color:"textSecondary",display:"block",children:[t.date.split("-").reverse().join(".")," / ",t.start," Uhr"]}),Object(c.jsx)(mt.a,{variant:"h6",color:"textPrimary",children:t.name})]}),Object(c.jsx)(ht.a,{className:a.cardActions,children:f===r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(gt.a,{className:i?a.contrastText:"",onClick:function(e){e.stopPropagation(),p(-1)},children:Object(c.jsx)("span",{className:"material-icons",children:"clear"})}),Object(c.jsx)(He.a,{variant:"contained",color:"secondary",onClick:function(n){n.stopPropagation(),e(J(t.id)),p(-1)},children:Object(c.jsx)("span",{className:"material-icons",children:"delete"})})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(gt.a,{className:i?a.contrastText:"",onClick:function(e){return m(e,t.id)},children:Object(c.jsx)("span",{className:"material-icons",children:"edit"})}),Object(c.jsx)(gt.a,{className:i?a.contrastText:"",onClick:function(e){e.stopPropagation(),p(r)},children:Object(c.jsx)("span",{className:"material-icons",children:"delete"})})]})})]}),(t.place||t.host)&&Object(c.jsx)(mt.a,{variant:"caption",color:"textSecondary",display:"block",paragraph:!0,children:"".concat(t.place).concat(t.place&&t.host?" | ":"").concat(t.host)}),Object(c.jsx)(mt.a,{variant:"body1",children:Object.keys(t.disciplines).reduce((function(e,n){return t.disciplines[n]?"".concat(e).concat(e.length?", ":"").concat(n):e}),"")}),t.disciplines[G.GYMNASTICS]&&Object.keys(t.gymnastics).map((function(e){return Object(c.jsxs)(mt.a,{variant:"caption",color:"textSecondary",display:"block",children:[Object(c.jsxs)("span",{className:a.gymnasticsTag,children:["Turnen ",e,":"]})," ",t.gymnastics[e]]},e)}))]})},t.id)}))}):null},Nt=n(161),St=n(162),It=n(163),Tt=n(169);function At(e){return e.replace(/\s+/gm," ").replace(/[,\s]*,[,\s]*/gm,", ")}var _t=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.events.draft.id})),n=Object(s.c)((function(e){return e.events.draft.name})),a=Object(s.c)((function(e){return e.events.draft.date})),i=Object(s.c)((function(e){return e.events.draft.place})),o=Object(s.c)((function(e){return e.events.draft.host})),l=Object(s.c)((function(e){return e.events.draft.start})),d=Object(s.c)((function(e){return e.events.draft.final})),b=Object(s.c)((function(e){return e.events.draft.disciplines})),f=Object(s.c)((function(e){return e.events.draft.gymnastics})),p=Object(s.c)((function(e){return e.events.draft.competitorIds})),O=yt();Object(r.useEffect)((function(){return function(){return e(q())}}),[e]);var v=function(){var c=Object.keys(f).reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(u.a)({},t,At(f[t])))}),{});e(V({id:t,name:n,date:a,place:i,host:o,start:l,final:d,disciplines:b,gymnastics:c,competitorIds:p})),e(x(j))};return Object(c.jsx)(Ot.a,{elevation:3,className:O.card,onKeyDown:function(e){"Enter"===e.key&&v()},children:Object(c.jsx)(vt.a,{children:Object(c.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(c.jsxs)("div",{className:O.flexRow,children:[Object(c.jsx)(Be.a,{id:"filled-name",label:"Wettbewerb",variant:"filled",value:n,onChange:function(t){return e(ee(t.target.value))},margin:A,fullWidth:!0}),Object(c.jsx)(Nt.a,{control:Object(c.jsx)(St.a,{checked:d,onChange:function(){return e(re())},name:"Jahresabschluss",color:"primary",inputProps:{"aria-label":"primary checkbox"}}),label:"Jahresab.",labelPlacement:"top"})]}),Object(c.jsxs)("div",{className:O.flexRow,children:[Object(c.jsx)(Be.a,{id:"date",label:"Datum",type:"date",variant:"filled",value:a,onChange:function(t){return e(te(t.target.value))},margin:A,fullWidth:!0}),Object(c.jsx)("div",{className:O.spacer}),Object(c.jsx)(Be.a,{id:"time",label:"Beginn",type:"time",variant:"filled",value:l,onChange:function(t){return e(ce(t.target.value))},margin:A,fullWidth:!0,inputProps:{step:300}})]}),Object(c.jsxs)("div",{className:O.flexRow,children:[Object(c.jsx)(Be.a,{id:"filled-place",label:"Wettkampf Ort",variant:"filled",value:i,onChange:function(t){return e(ne(t.target.value))},margin:A,fullWidth:!0}),Object(c.jsx)("div",{className:O.spacer}),Object(c.jsx)(Be.a,{id:"filled-host",label:"Ausrichter",variant:"filled",value:o,onChange:function(t){return e(ae(t.target.value))},margin:A,fullWidth:!0})]}),Object(c.jsx)(It.a,{row:!0,children:Object.keys(b).map((function(t){return Object(c.jsx)(Nt.a,{control:Object(c.jsx)(Tt.a,{checked:b[t],onChange:function(){return e(ie(t))},name:t,color:t===G.GYMNASTICS?"primary":"secondary"}),label:t},t)}))}),b[G.GYMNASTICS]&&Object.keys(f).map((function(t){var n=F[t];return Object(c.jsxs)("div",{className:O.marginTop,children:[Object(c.jsx)("h3",{children:"Turnen ".concat(t," (Jahrgang ").concat(Oe(n[n.length-1])," - ").concat(Oe(n[0]),")")}),Object(c.jsx)(Be.a,{id:"outlined-multiline-flexible",label:"\xdcbungen",multiline:!0,rowsMax:4,variant:"outlined",value:f[t],onChange:function(n){return e(oe({group:t,gymnastics:n.target.value}))},margin:A,fullWidth:!0})]},t)})),Object(c.jsx)(ht.a,{className:O.marginTop,children:Object(c.jsx)(He.a,{variant:"contained",color:"primary",onClick:v,children:"Fertig"})})]})})})};var Et=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.competitors.all})),n=Object(s.c)(Me),a=n.competitorIds||Re.ARRAY,i=xt(),o=Object(r.useState)([]),l=Object(Le.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)(-1),b=Object(Le.a)(j,2),f=b[0],O=b[1],v=Object(r.useState)(!1),m=Object(Le.a)(v,2),h=m[0],g=m[1],y=Object(r.useCallback)((function(){return e(he())}),[e]),k=!Ue(t)||0===Object.keys(t).length;return Je(15,y,k),Object(r.useEffect)((function(){Ue(t)&&d(Object.values(t).sort((function(e,t){return e.name.charCodeAt(0)-t.name.charCodeAt(0)})))}),[t]),Object(r.useEffect)((function(){h&&(e(V(n)),g(!1))}),[e,n,h]),u.length?Object(c.jsx)("div",{children:u.map((function(t,r){var o=!n.id,s=a.includes(t.id);return Object(c.jsx)(Ot.a,{className:"".concat(i.card," ").concat(s&&i.cardActive),elevation:3,onClick:function(){o||(e(s?Q(t.id):Z(t.id)),g(!0))},children:Object(c.jsxs)(vt.a,{children:[Object(c.jsxs)("div",{className:i.cardContent,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(mt.a,{variant:"overline",color:"textSecondary",display:"block",children:"".concat(t.year," | ").concat(t.gender)}),Object(c.jsx)(mt.a,{variant:"h6",color:"textPrimary",children:t.name})]}),Object(c.jsx)(ht.a,{className:i.cardActions,children:f===r?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(gt.a,{className:s?i.contrastText:"",onClick:function(e){e.stopPropagation(),O(-1)},children:Object(c.jsx)("span",{className:"material-icons",children:"clear"})}),Object(c.jsx)(He.a,{variant:"contained",color:"secondary",onClick:function(n){n.stopPropagation(),e(ge(t.id)),O(-1)},children:Object(c.jsx)("span",{className:"material-icons",children:"delete"})})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(gt.a,{className:s?i.contrastText:"",onClick:function(n){n.stopPropagation(),e(Ce(t.id)),e(x(p))},children:Object(c.jsx)("span",{className:"material-icons",children:"edit"})}),Object(c.jsx)(gt.a,{className:s?i.contrastText:"",onClick:function(e){e.stopPropagation(),O(r)},children:Object(c.jsx)("span",{className:"material-icons",children:"delete"})})]})})]}),Object(c.jsx)(mt.a,{variant:"caption",color:"textSecondary",display:"block",children:t.club||"Kein Verein"})]})},t.id)}))}):null},Pt=n(151),Lt=n(173),Rt=n(165),Ut=n(176);var Mt,Dt,Ft,Wt,Gt=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.competitors.draft.id})),n=Object(s.c)((function(e){return e.competitors.draft.name})),a=Object(s.c)((function(e){return e.competitors.draft.gender})),i=Object(s.c)((function(e){return e.competitors.draft.year})),o=Object(s.c)((function(e){return e.competitors.draft.weight})),l=Object(s.c)((function(e){return e.competitors.draft.club})),u=Object(s.c)((function(e){return e.competitors.draft.results})),d=yt();Object(r.useEffect)((function(){return function(){return e(we())}}),[e]);var j=function(){e(xe({id:t,name:At(n),gender:a,year:i,weight:o,club:At(l),results:u})),e(x(f))};return Object(c.jsx)(Ot.a,{elevation:3,className:d.card,onKeyDown:function(e){"Enter"===e.key&&j()},children:Object(c.jsx)(vt.a,{children:Object(c.jsxs)("form",{noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(Be.a,{id:"filled-name",label:"Name",variant:"filled",value:n,onChange:function(t){return e(Ne(t.target.value))},margin:A,fullWidth:!0}),Object(c.jsx)(Be.a,{id:"filled-club",label:"Verein",variant:"filled",value:l,onChange:function(t){return e(Ae(t.target.value))},margin:A,fullWidth:!0}),Object(c.jsxs)("div",{className:d.gridRow,children:[Object(c.jsxs)(Pt.a,{margin:A,children:[Object(c.jsx)(Lt.a,{id:"demo-simple-select-label-gender",children:"Geschlecht"}),Object(c.jsx)(Rt.a,{labelId:"demo-simple-select-label-gender",id:"demo-simple-select-gender",value:a,onChange:function(t){return e(Se(t.target.value))},children:Object.values(U).map((function(e){return Object(c.jsx)(Ut.a,{value:e,children:e},e)}))})]}),Object(c.jsxs)(Pt.a,{margin:A,children:[Object(c.jsx)(Lt.a,{id:"demo-simple-select-label-year",children:"Jahrgang"}),Object(c.jsx)(Rt.a,{labelId:"demo-simple-select-label-year",id:"demo-simple-select-year",value:i,onChange:function(t){return e(Ie(t.target.value))},children:M.map((function(e){return Oe(e)})).map((function(e){return Object(c.jsx)(Ut.a,{value:e,children:e},e)}))})]})]}),Object(c.jsx)(ht.a,{className:d.marginTop,children:Object(c.jsx)(He.a,{variant:"contained",color:"primary",onClick:j,children:"Fertig"})})]})})})},Bt=(Ft={},Object(u.a)(Ft,U.FEMALE,(Mt={},Object(u.a)(Mt,W.SCHO,[2,2,2,2,3,3]),Object(u.a)(Mt,W.PUSH,[40,45,50,55,60,65]),Object(u.a)(Mt,W.PULL,[40,45,50,50,55,60]),Mt)),Object(u.a)(Ft,U.MALE,(Dt={},Object(u.a)(Dt,W.SCHO,[2,2,3,3,4,4]),Object(u.a)(Dt,W.PUSH,[45,50,60,65,70,75]),Object(u.a)(Dt,W.PULL,[45,50,55,60,65,70]),Dt)),Ft),Yt="kg",Ht="percent",Jt=(Wt={},Object(u.a)(Wt,W.SCHO,Yt),Object(u.a)(Wt,W.PUSH,Ht),Object(u.a)(Wt,W.PULL,Ht),Wt);var Vt=n(164);var zt=function(e){var t=wt(),n=Object(r.useState)((function(){return function(){return!0}})),a=Object(Le.a)(n,2),i=a[0],o=a[1],s=Object(r.useState)([]),l=Object(Le.a)(s,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){o((function(){return function(e){return u.every((function(t){return"function"!==typeof t||t(e)}))}}))}),[u,o]),[i,function(){return Object(c.jsx)("div",{className:t.filter,children:e.map((function(e,n){return Object(c.jsx)(Vt.a,{variant:"contained",className:t.filterGroup,children:Object.keys(e).map((function(t){var a=u[n]===e[t];return Object(c.jsx)(He.a,{color:a?"primary":"default",onClick:function(){return d((function(c){var r=Object(le.a)(c);return r[n]=a?void 0:e[t],r}))},children:t},t)}))},n)}))})}]};var Kt,qt,$t=function(e){var t,n,a=e.event,i=e.competitor,o=Object(s.b)(),l=kt(),d=null===(t=i.results)||void 0===t||null===(n=t[a.id])||void 0===n?void 0:n[G.GYMNASTICS],j=a.gymnastics[Object.values(D).find((function(e){return F[e].includes(pe(i.year))}))],b=j.split(", ").filter((function(e){return!!e})),f=Object(r.useState)(d||b.reduce((function(e,t){return Object(S.a)(Object(S.a)({},e),{},Object(u.a)({},t,0))}),{})),p=Object(Le.a)(f,2),O=p[0],v=p[1];if(Object(r.useEffect)((function(){o(_e({eventId:a.id,competitorId:i.id,discipline:G.GYMNASTICS,result:O}))}),[a.id,i.id,o,O]),!j.length)return null;var m=fe(G.GYMNASTICS,O);return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(mt.a,{variant:"overline",paragraph:!0,className:l.marginTop,children:G.GYMNASTICS}),Object(c.jsxs)("div",{className:l.editor,children:[b.map((function(e){return Object(c.jsxs)(Pt.a,{style:{overflow:"hidden",textOverflow:"ellipsis"},children:[Object(c.jsx)(Lt.a,{id:"".concat(e,"-label"),children:e}),Object(c.jsxs)(Rt.a,{labelId:"".concat(e,"-label"),id:"".concat(e),value:O[e],onChange:function(t){return v((function(n){var a=Object(S.a)({},n);return a[e]=t.target.value,a}))},children:[Object(c.jsx)(Ut.a,{value:2,children:"2"}),Object(c.jsx)(Ut.a,{value:1.5,children:"1,5"}),Object(c.jsx)(Ut.a,{value:1,children:"1"}),Object(c.jsx)(Ut.a,{value:.5,children:"0,5"}),Object(c.jsx)(Ut.a,{value:0,children:"0"})]})]},e)})),Object(c.jsxs)("div",{className:l.gymnasticsResult,children:[Object(c.jsx)("span",{className:"material-icons ".concat(l.editorIcon),children:"play_arrow"}),Object(c.jsx)(mt.a,{color:"primary",display:"inline",className:l.editorPoints,children:m||"--"})]})]})]})},Zt=[(Kt={},Object(u.a)(Kt,U.FEMALE,(function(e){return e.gender===U.FEMALE})),Object(u.a)(Kt,U.MALE,(function(e){return e.gender===U.MALE})),Kt),(qt={},Object(u.a)(qt,D.A,(function(e){return F[D.A].includes(pe(e.year))})),Object(u.a)(qt,D.B,(function(e){return F[D.B].includes(pe(e.year))})),qt)];var Qt=function(){var e=Object(s.b)(),t=Object(s.c)(De),n=Object(s.c)((function(e){return e.competitors.rankedList})),a=Object(s.c)(Me),i=Object(s.c)(Fe),o=a.final?i:a.id,l=kt(),u=Object(r.useState)(0),d=Object(Le.a)(u,2),j=d[0],b=d[1],f=zt(Zt),p=Object(Le.a)(f,2),O=p[0],v=p[1],m=(null===a||void 0===a?void 0:a.competitorIds)||Re.ARRAY,h=Object(r.useCallback)((function(){return e(he(m.filter((function(e){return e!==j}))))}),[e,j,m]);return Je(5,h),Object(r.useEffect)((function(){e(Ee({competitors:t,eventIds:o}))}),[Object.keys(t).length]),a.id?Object(c.jsxs)("div",{children:[Object(c.jsx)(v,{}),!!n.length&&n.filter(O).map((function(n,r){var i=j===n.id;return Object(c.jsx)(Ot.a,{className:"".concat(l.card),elevation:3,onClick:function(){i||(j&&e(xe(t.find((function(e){return e.id===j})))),b(n.id))},children:Object(c.jsxs)(vt.a,{children:[Object(c.jsxs)("div",{className:l.row,children:[Object(c.jsx)(mt.a,{variant:"overline",color:"textSecondary",display:"block",children:"".concat(n.year," | ").concat(n.gender).concat(n.weight[a.id]?" | ".concat(n.weight[a.id]," kg"):"")}),Object(c.jsxs)(mt.a,{variant:"overline",color:"textSecondary",display:"block",children:["Punkte ",n.points]})]}),Object(c.jsxs)("div",{className:l.row,children:[Object(c.jsx)(mt.a,{variant:"h6",color:"textPrimary",children:n.name}),Object(c.jsxs)(mt.a,{variant:"h6",color:"primary",children:["Platz ",n.rank]})]}),i&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{className:l.editor,children:[Object(c.jsx)("div",{className:l.editorEntry,children:Object(c.jsx)(Be.a,{id:"filled-weight",label:"K\xf6rpergewicht",type:"number",variant:"outlined",value:n.weight[a.id],onChange:function(t){return e(Te({eventId:a.id,competitorId:n.id,weight:t.target.value}))},margin:"dense"})}),Object.keys(a.disciplines).filter((function(e){return e!==G.GYMNASTICS})).map((function(t){var r;if(!a.disciplines[t])return null;var i=null===(r=n.results[a.id])||void 0===r?void 0:r[t],o=function(e,t,n,a){if(!Jt[a])return 0;var c=pe(e),r=Bt[t][a][M.indexOf(c)];switch(Jt[a]){case Yt:return r;case Ht:return Math.round(n*r/100)}}(n.year,n.gender,n.weight[a.id],t);return Object(c.jsxs)("div",{className:l.editorEntry,children:[Object(c.jsx)(Be.a,{id:"filled-".concat(t),label:"".concat(t).concat(o?" ".concat(o," kg"):""),type:"number",variant:"filled",value:i,onChange:function(c){return e(_e({eventId:a.id,competitorId:n.id,discipline:t,result:c.target.value}))},margin:A}),Object(c.jsx)("span",{className:"material-icons ".concat(l.editorIcon),children:"play_arrow"}),Object(c.jsx)(mt.a,{color:"primary",display:"inline",className:l.editorPoints,children:i?fe(t,i):"--"})]},t)}))]}),Object(c.jsx)($t,{event:a,competitor:n}),Object(c.jsx)(ht.a,{className:l.marginTop,children:Object(c.jsx)(He.a,{variant:"contained",color:"primary",onClick:function(){e(xe(t.find((function(e){return e.id===n.id})))),b(0)},children:"Fertig"})})]})]})},r)}))]}):null};var Xt=function(){var e=Object(r.useState)(!1),t=Object(Le.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){window.addEventListener("offline",(function(){return a(!0)})),window.addEventListener("online",(function(){return a(!1)}))}),[]),Object(c.jsx)(We.a,{open:n,onClose:function(){},"aria-labelledby":"form-dialog-title",children:Object(c.jsxs)(Ge.a,{children:[Object(c.jsx)(mt.a,{children:"Kein Internet"}),Object(c.jsx)("div",{style:{textAlign:"center"},children:Object(c.jsx)("span",{className:"material-icons",children:"perm_scan_wifi"})})]})})},en=n(77),tn=n.n(en);var nn,an=function(e){var t=e.children;return Object(r.useEffect)((function(){window.scroll(0,0)}),[t]),Object(c.jsx)("div",{className:tn.a.MainView,style:at(),children:t})},cn=(nn={},Object(u.a)(nn,j,Object(c.jsx)(Ct,{})),Object(u.a)(nn,b,Object(c.jsx)(_t,{})),Object(u.a)(nn,f,Object(c.jsx)(Et,{})),Object(u.a)(nn,p,Object(c.jsx)(Gt,{})),Object(u.a)(nn,O,Object(c.jsx)(Qt,{})),nn);var rn=function(){var e=Object(s.c)(Me).name||"",t=Object(s.c)((function(e){return e.navigation.activeContent})),n=Object(r.useState)(!1),a=Object(Le.a)(n,2)[1];return Object(r.useEffect)((function(){var e=function(){return a((function(e){return!e}))};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(r.useEffect)((function(){document.title=e||"TSC"}),[e]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ve,{}),Object(c.jsx)(Xt,{}),Object(c.jsx)(ot,{}),Object(c.jsx)(an,{children:cn[t]}),Object(c.jsx)(pt,{})]})};o.a.render(Object(c.jsx)(s.a,{store:Object(l.a)({reducer:Pe}),children:Object(c.jsx)(rn,{})}),document.getElementById("root"))},60:function(e,t,n){e.exports={TopNavigation:"TopNavigation_TopNavigation__1sjDd",TopNavigationStepper:"TopNavigation_TopNavigationStepper__3xFMu",TopNavigationSpacer:"TopNavigation_TopNavigationSpacer__1GvRx"}},65:function(e,t,n){e.exports={BottomNavigation:"BottomNavigation_BottomNavigation__2CoWW",Cta:"BottomNavigation_Cta__1wAwD"}},77:function(e,t,n){e.exports={MainView:"MainView_MainView__1sxw3"}}},[[107,1,2]]]);
//# sourceMappingURL=main.b1457f7e.chunk.js.map